<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Flow_net.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Flow" rel="Chapter" href="Flow.html">
<link title="Flow_base" rel="Chapter" href="Flow_base.html">
<link title="Flow_io" rel="Chapter" href="Flow_io.html">
<link title="Flow_list" rel="Chapter" href="Flow_list.html">
<link title="Flow_net" rel="Chapter" href="Flow_net.html">
<link title="Flow_system" rel="Chapter" href="Flow_system.html"><title>The Flow Monad Library : Flow_system</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Flow_net.html" title="Flow_net">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;</div>
<h1>Module <a href="type_Flow_system.html">Flow_system</a> (<a href="code_Flow_system.html">.ml</a>)</h1>
<pre><span class="keyword">module</span> Flow_system: <code class="code"><span class="keyword">sig</span></code> <a href="Flow_system.html">..</a> <code class="code"><span class="keyword">end</span></code></pre>Basic system access functions.<br>
<hr width="100%">
<pre><span id="VALsleep"><span class="keyword">val</span> <a href="code_VALFlow_system.sleep.html">sleep</a></span> : <code class="type">float -> (unit, [> `system_exn of exn ]) <a href="Flow_base.html#TYPEt">Flow_base.t</a></code></pre><div class="info">
Block for a given amount of seconds (<code class="code"><span class="constructor">Lwt_unix</span>.sleep</code>).<br>
</div>
<pre><span id="VALsystem_command"><span class="keyword">val</span> <a href="code_VALFlow_system.system_command.html">system_command</a></span> : <code class="type">string -><br>       (unit,<br>        [> `system_command_error of<br>             string *<br>             [> `exited of int | `exn of exn | `signaled of int | `stopped of int ] ])<br>       <a href="Flow_base.html#TYPEt">Flow_base.t</a></code></pre><div class="info">
Make <code class="code">/bin/sh</code> execute a command.<br>
</div>
<pre><span id="VALget_system_command_output"><span class="keyword">val</span> <a href="code_VALFlow_system.get_system_command_output.html">get_system_command_output</a></span> : <code class="type">string -><br>       (string * string,<br>        [> `system_command_error of<br>             string *<br>             [> `exited of int | `exn of exn | `signaled of int | `stopped of int ] ])<br>       <a href="Flow_base.html#TYPEt">Flow_base.t</a></code></pre><div class="info">
Execute a shell command and return its <code class="code">stdout, stderr</code>.<br>
</div>
<pre><span id="VALwith_timeout"><span class="keyword">val</span> <a href="code_VALFlow_system.with_timeout.html">with_timeout</a></span> : <code class="type">float -><br>       f:(unit -><br>          ('a, [> `system_exn of exn | `timeout of float ] as 'b) <a href="Flow_base.html#TYPEt">Flow_base.t</a>) -><br>       ('a, 'b) <a href="Flow_base.html#TYPEt">Flow_base.t</a></code></pre><div class="info">
Execute a function <code class="code">f</code> with a timeout (in seconds). If <code class="code">f</code> throws
    an exception it will be passed as <code class="code"><span class="keywordsign">`</span>system_exn e</code>, if the functions
    timeouts the error will be <code class="code"><span class="keywordsign">`</span>timeout time</code>.<br>
</div>
<pre><span id="VALmake_directory"><span class="keyword">val</span> <a href="code_VALFlow_system.make_directory.html">make_directory</a></span> : <code class="type">?perm:int -><br>       ?parents:bool -><br>       string -><br>       (unit,<br>        [> `system of<br>             [> `make_directory of string ] *<br>             [> `already_exists | `exn of exn | `wrong_access_rights of int ] ])<br>       <a href="Flow_base.html#TYPEt">Flow_base.t</a></code></pre><div class="info">
Create a directory and its potential parents.
    If <code class="code">parents</code> is <code class="code"><span class="keyword">true</span></code> (the <b>default</b>) it is like <code class="code">mkdir -p</code> and it
    won't fail if the directory already exists.
    If <code class="code">parents</code> is <code class="code"><span class="keyword">false</span></code>, then it is like <code class="code">mkdir</code> (fails on
    existing directories).
    The default permissions are <code class="code">0o700</code>.<br>
</div>
<pre><span id="TYPEfile_info"><span class="keyword">type</span> <code class="type"></code>file_info</span> = <code class="type">[ `absent<br>       | `block_device<br>       | `character_device<br>       | `directory<br>       | `fifo<br>       | `regular_file of int<br>       | `socket<br>       | `symlink of string ]</code> </pre>
<div class="info">
Quick information on files.<br>
</div>

<pre><span id="VALsexp_of_file_info"><span class="keyword">val</span> <a href="code_VALFlow_system.sexp_of_file_info.html">sexp_of_file_info</a></span> : <code class="type"><a href="Flow_system.html#TYPEfile_info">file_info</a> -> Core.Std.Sexp.t</code></pre><pre><span id="VALfile_info_of_sexp"><span class="keyword">val</span> <a href="code_VALFlow_system.file_info_of_sexp.html">file_info_of_sexp</a></span> : <code class="type">Core.Std.Sexp.t -> <a href="Flow_system.html#TYPEfile_info">file_info</a></code></pre><pre><span id="VALfile_info"><span class="keyword">val</span> <a href="code_VALFlow_system.file_info.html">file_info</a></span> : <code class="type">?follow_symlink:bool -><br>       string -><br>       (<a href="Flow_system.html#TYPEfile_info">file_info</a>,<br>        [> `system of [> `file_info of string ] * [> `exn of exn ] ])<br>       <a href="Flow_base.html#TYPEt">Flow_base.t</a></code></pre><div class="info">
Get information about a path (whether it exists, its size, or
    sym-link destination). If <code class="code">follow_symlink</code> is <code class="code"><span class="keyword">false</span></code>
    (default) use <code class="code">lstat</code> (so the result can be <code class="code"><span class="keywordsign">`</span>symlink _</code>), if <code class="code"><span class="keyword">true</span></code>
    call <code class="code">stat</code> (information about the target).<br>
</div>
<pre><span id="VALlist_directory"><span class="keyword">val</span> <a href="code_VALFlow_system.list_directory.html">list_directory</a></span> : <code class="type">string -><br>       [ `stream of<br>           unit -><br>           (string option,<br>            [> `system of [> `list_directory of string ] * [> `exn of exn ] ])<br>           <a href="Flow_base.html#TYPEt">Flow_base.t</a> ]</code></pre><div class="info">
Get all the children of a directory, through a <code class="code">next</code> stream-like
    function.<br>
</div>
<pre><span id="VALremove"><span class="keyword">val</span> <a href="code_VALFlow_system.remove.html">remove</a></span> : <code class="type">string -><br>       (unit,<br>        [> `system of<br>             [> `file_info of string | `list_directory of string | `remove of string ] *<br>             [> `exn of exn ] ])<br>       <a href="Flow_base.html#TYPEt">Flow_base.t</a></code></pre><div class="info">
Remove a file or a directory recursively.<br>
</div>
<pre><span id="VALmake_symlink"><span class="keyword">val</span> <a href="code_VALFlow_system.make_symlink.html">make_symlink</a></span> : <code class="type">target:string -><br>       link_path:string -><br>       (unit,<br>        [> `system of [> `make_symlink of string * string ] * [> `exn of exn ] ])<br>       <a href="Flow_base.html#TYPEt">Flow_base.t</a></code></pre><div class="info">
Make a symbolic link <code class="code">link_path</code> pointing at <code class="code">target</code>.<br>
</div>
<pre><span id="TYPEfile_destination"><span class="keyword">type</span> <code class="type"></code>file_destination</span> = <code class="type">[ `into of string | `onto of string ]</code> </pre>
<div class="info">
Specification of a “destination” for <code class="code">copy</code> and <code class="code">move</code>.<br>
</div>

<pre><span id="VALcopy"><span class="keyword">val</span> <a href="code_VALFlow_system.copy.html">copy</a></span> : <code class="type">?ignore_strange:bool -><br>       ?symlinks:[ `fail | `follow | `redo ] -><br>       ?buffer_size:int -><br>       src:string -><br>       <a href="Flow_system.html#TYPEfile_destination">file_destination</a> -><br>       (unit,<br>        [> `system of<br>             [> `copy of string<br>              | `file_info of string<br>              | `list_directory of string<br>              | `make_directory of string<br>              | `make_symlink of string * string ] *<br>             [> `already_exists<br>              | `exn of exn<br>              | `file_not_found of string<br>              | `wrong_access_rights of int<br>              | `wrong_file_kind of<br>                  string *<br>                  [> `block_device<br>                   | `character_device<br>                   | `fifo<br>                   | `socket<br>                   | `symlink of string ] ] ])<br>       <a href="Flow_base.html#TYPEt">Flow_base.t</a></code></pre><div class="info">
Copy files or directories (recursively).
<p>

    If <code class="code">ignore_strange</code> is true <code class="code">copy</code> won't fail on block/character
    devices, fifos or sockets (defaults to <code class="code"><span class="keyword">false</span></code>).
<p>

    The <code class="code">buffer_size</code> (default <code class="code">64_000</code>) is used both for reading and
    writing files.
<p>

    On can <code class="code"><span class="keywordsign">`</span>fail</code> on symbolic links, <code class="code"><span class="keywordsign">`</span>follow</code> them, or <code class="code"><span class="keywordsign">`</span>redo</code> a new
    symlink with the same target.<br>
</div>
<pre><span id="VALmove_in_same_device"><span class="keyword">val</span> <a href="code_VALFlow_system.move_in_same_device.html">move_in_same_device</a></span> : <code class="type">src:string -><br>       <a href="Flow_system.html#TYPEfile_destination">file_destination</a> -><br>       ([ `moved | `must_copy ],<br>        [> `system of [> `move of string ] * [> `exn of exn ] ])<br>       <a href="Flow_base.html#TYPEt">Flow_base.t</a></code></pre><div class="info">
Try to move <code class="code">src</code> to <code class="code">dest</code> using <code class="code"><span class="constructor">Lwt_unix</span>.rename</code>, if it works,
    return <code class="code"><span class="keywordsign">`</span>moved</code> if it does not work but <code class="code">copy</code> could work
    (i.e. both paths are not in the same <i>device</i>) return
    <code class="code"><span class="keywordsign">`</span>must_copy</code>.<br>
</div>
<pre><span id="VALmove"><span class="keyword">val</span> <a href="code_VALFlow_system.move.html">move</a></span> : <code class="type">?ignore_strange:bool -><br>       ?symlinks:[ `fail | `follow | `redo ] -><br>       ?buffer_size:int -><br>       src:string -><br>       <a href="Flow_system.html#TYPEfile_destination">file_destination</a> -><br>       (unit,<br>        [> `system of<br>             [> `copy of string<br>              | `file_info of string<br>              | `list_directory of string<br>              | `make_directory of string<br>              | `make_symlink of string * string<br>              | `move of string<br>              | `remove of string ] *<br>             [> `already_exists<br>              | `exn of exn<br>              | `file_not_found of string<br>              | `wrong_access_rights of int<br>              | `wrong_file_kind of<br>                  string *<br>                  [> `block_device<br>                   | `character_device<br>                   | `fifo<br>                   | `socket<br>                   | `symlink of string ] ] ])<br>       <a href="Flow_base.html#TYPEt">Flow_base.t</a></code></pre><div class="info">
Heavy-weight function trying to mimic the behavior the UNIX command “mv”
    (c.f. <a href="http://www.openbsd.org/cgi-bin/cvsweb/src/bin/mv/mv.c?rev=1.35;content-type=text%2Fplain;only_with_tag=HEAD">mv.c</a>):
    it tries <code class="code">move_in_same_device</code> and if it returns <code class="code"><span class="keywordsign">`</span>must_copy</code> it
    calls <code class="code">copy</code> and <code class="code">remove</code> (if <code class="code">copy</code> fails, the <code class="code">remove</code> won't
    happen but there will be no clean-up of the files already
    copied).<br>
</div>
<pre><span id="TYPEfile_tree"><span class="keyword">type</span> <code class="type"></code>file_tree</span> = <code class="type">[ `leaf of string * <a href="Flow_system.html#TYPEfile_info">file_info</a><br>       | `node of string * <a href="Flow_system.html#TYPEfile_tree">file_tree</a> list ]</code> </pre>
<div class="info">
Representation of a hierarchy of files (<code class="code"><span class="keywordsign">`</span>leaf</code>) and directories (<code class="code"><span class="keywordsign">`</span>node</code>).<br>
</div>

<pre><span id="VALfile_tree"><span class="keyword">val</span> <a href="code_VALFlow_system.file_tree.html">file_tree</a></span> : <code class="type">?follow_symlinks:bool -><br>       string -><br>       (<a href="Flow_system.html#TYPEfile_tree">file_tree</a>,<br>        [> `system of<br>             [> `file_info of string<br>              | `file_tree of string<br>              | `list_directory of string ] *<br>             [> `exn of exn | `file_not_found of string | `wrong_file_kind of 'b ] ])<br>       <a href="Flow_base.html#TYPEt">Flow_base.t</a></code></pre><div class="info">
Obtain the <code class="code">file_tree</code> starting at a given path.<br>
</div>
<pre><span id="VALfile_tree_of_sexp"><span class="keyword">val</span> <a href="code_VALFlow_system.file_tree_of_sexp.html">file_tree_of_sexp</a></span> : <code class="type">Sexplib.Sexp.t -> <a href="Flow_system.html#TYPEfile_tree">file_tree</a></code></pre><pre><span id="VALfile_tree_of_sexp__"><span class="keyword">val</span> <a href="code_VALFlow_system.file_tree_of_sexp__.html">file_tree_of_sexp__</a></span> : <code class="type">Sexplib.Sexp.t -> <a href="Flow_system.html#TYPEfile_tree">file_tree</a></code></pre><pre><span id="VALsexp_of_file_tree"><span class="keyword">val</span> <a href="code_VALFlow_system.sexp_of_file_tree.html">sexp_of_file_tree</a></span> : <code class="type"><a href="Flow_system.html#TYPEfile_tree">file_tree</a> -> Sexplib.Sexp.t</code></pre><br>
Obtain the <code class="code">file_tree</code> starting at a given path.<br>
</body></html>